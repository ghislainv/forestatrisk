<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>&lt;no title&gt; &#8212; forestatrisk — Modelling and forecasting deforestation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=d1102ebc" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css?v=b21ac067" />
    <script src="../_static/documentation_options.js?v=928db92d"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="&lt;no title&gt;" href="forestatrisk.plot.html" />
    <link rel="prev" title="&lt;no title&gt;" href="forestatrisk.project.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="../index.html">
    <img class="logo" src="../_static/logo-far.svg" alt="Logo" />
    
    <h1 class="logo logo-name">forestatrisk</h1>
    
  </a>
</p>



<p class="blurb">Modelling and forecasting deforestation in the tropics</p>




<p>
<iframe src="https://ghbtns.com/github-btn.html?user=ghislainv&repo=forestatrisk&type=star&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebooks/get_started.html">Get started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../articles.html">Articles</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../python_api.html">Python API</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../python_api.html#data">Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../python_api.html#model">Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../python_api.html#predict">Predict</a></li>
<li class="toctree-l2"><a class="reference internal" href="../python_api.html#project">Project</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../python_api.html#validate">Validate</a></li>
<li class="toctree-l2"><a class="reference internal" href="../python_api.html#plot">Plot</a></li>
<li class="toctree-l2"><a class="reference internal" href="../python_api.html#miscellaneous">Miscellaneous</a></li>
<li class="toctree-l2"><a class="reference internal" href="../python_api.html#submodules">Submodules</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../indices.html">Indices and tables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../citation.html">Citation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">License</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="../python_api.html">Python API</a><ul>
      <li>Previous: <a href="forestatrisk.project.html" title="previous chapter">&lt;no title&gt;</a></li>
      <li>Next: <a href="forestatrisk.plot.html" title="next chapter">&lt;no title&gt;</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <dl class="py function">
<dt class="sig sig-object py" id="forestatrisk.computeAUC">
<span class="sig-prename descclassname"><span class="pre">forestatrisk.</span></span><span class="sig-name descname"><span class="pre">computeAUC</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pos_scores</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">neg_scores</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_sample</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100000</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/forestatrisk/validate/model_validation.html#computeAUC"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#forestatrisk.computeAUC" title="Link to this definition">¶</a></dt>
<dd><p>Compute the AUC index.</p>
<p>Compute the Area Under the ROC Curve (AUC). See <a class="reference external" href="https://doi.org/10.1111/j.1600-0587.2010.06354.x">Liu et al. 2011</a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pos_scores</strong> – Scores of positive observations.</p></li>
<li><p><strong>neg_scores</strong> – Scores of negative observations.</p></li>
<li><p><strong>n_samples</strong> – Number of samples to approximate AUC.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>AUC value.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="forestatrisk.accuracy_indices">
<span class="sig-prename descclassname"><span class="pre">forestatrisk.</span></span><span class="sig-name descname"><span class="pre">accuracy_indices</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pred</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/forestatrisk/validate/model_validation.html#accuracy_indices"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#forestatrisk.accuracy_indices" title="Link to this definition">¶</a></dt>
<dd><p>Compute accuracy indices.</p>
<p>Compute the Overall Accuracy, the Figure of Merit, the
Specificity, the Sensitivity, the True Skill Statistics and the
Cohen’s Kappa from a confusion matrix built on predictions
vs. observations.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pred</strong> – List of predictions.</p></li>
<li><p><strong>obs</strong> – List of observations.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A dictionnary of accuracy indices.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="forestatrisk.cross_validation">
<span class="sig-prename descclassname"><span class="pre">forestatrisk.</span></span><span class="sig-name descname"><span class="pre">cross_validation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">formula</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mod_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'icar'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ratio</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">30</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nrep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1234</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">icar_args</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'beta_start':</span> <span class="pre">0,</span> <span class="pre">'burnin':</span> <span class="pre">1000,</span> <span class="pre">'mcmc':</span> <span class="pre">1000,</span> <span class="pre">'n_neighbors':</span> <span class="pre">None,</span> <span class="pre">'neighbors':</span> <span class="pre">None,</span> <span class="pre">'thin':</span> <span class="pre">1}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rf_args</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'n_estimators':</span> <span class="pre">100,</span> <span class="pre">'n_jobs':</span> <span class="pre">None}</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/forestatrisk/validate/model_validation.html#cross_validation"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#forestatrisk.cross_validation" title="Link to this definition">¶</a></dt>
<dd><p>Model cross-validation</p>
<p>Performs model cross-validation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> – Full dataset.</p></li>
<li><p><strong>formula</strong> – Model formula.</p></li>
<li><p><strong>mod_type</strong> – Model type, can be either “icar”, “glm”, or “rf”.</p></li>
<li><p><strong>ratio</strong> – Percentage of data used for testing.</p></li>
<li><p><strong>nrep</strong> – Number of repetitions for cross-validation.</p></li>
<li><p><strong>seed</strong> – Seed for reproducibility.</p></li>
<li><p><strong>icar_args</strong> – Dictionnary of arguments for the binomial iCAR model.</p></li>
<li><p><strong>rf_args</strong> – Dictionnary of arguments for the random forest model.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A Pandas data frame with cross-validation results.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="forestatrisk.map_validation">
<span class="sig-prename descclassname"><span class="pre">forestatrisk.</span></span><span class="sig-name descname"><span class="pre">map_validation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pred</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blk_rows</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">128</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/forestatrisk/validate/map_validation.html#map_validation"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#forestatrisk.map_validation" title="Link to this definition">¶</a></dt>
<dd><p>Compute accuracy indices based on predicted and observed
forest-cover change (fcc) maps.</p>
<p>Compute the Overall Accuracy, the Figure of Merit, the
Specificity, the Sensitivity, the True Skill Statistics and the
Cohen’s Kappa from a confusion matrix built on predictions
vs. observations.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pred</strong> – Raster of predicted fcc.</p></li>
<li><p><strong>obs</strong> – Raster of observed fcc.</p></li>
<li><p><strong>blk_rows</strong> – If &gt; 0, number of rows for block (else 256x256).</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A dictionnary of accuracy indices.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="forestatrisk.map_confmat">
<span class="sig-prename descclassname"><span class="pre">forestatrisk.</span></span><span class="sig-name descname"><span class="pre">map_confmat</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">r_obs0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">r_obs1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">r_pred0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">r_pred1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blk_rows</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/forestatrisk/validate/map_accuracy.html#map_confmat"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#forestatrisk.map_confmat" title="Link to this definition">¶</a></dt>
<dd><p>Compute a confusion matrix.</p>
<p>This function computes a confusion matrix at a given
resolution. Number of pixels in each category (0, 1) and in each
spatial cell are given by r_obs* and r_pred* rasters.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>r_obs0</strong> – Raster counting the number of 0 for observations.</p></li>
<li><p><strong>r_obs1</strong> – Raster counting the number of 1 for observations.</p></li>
<li><p><strong>r_pred0</strong> – Raster counting the number of 0 for predictions.</p></li>
<li><p><strong>r_pred1</strong> – Raster counting the number of 1 for predictions.</p></li>
<li><p><strong>blk_rows</strong> – If &gt; 0, number of lines per block.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A numpy array of shape (2,2).</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="forestatrisk.map_accuracy">
<span class="sig-prename descclassname"><span class="pre">forestatrisk.</span></span><span class="sig-name descname"><span class="pre">map_accuracy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mat</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/forestatrisk/validate/map_accuracy.html#map_accuracy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#forestatrisk.map_accuracy" title="Link to this definition">¶</a></dt>
<dd><p>Compute accuracy indices from a confusion matrix.</p>
<p>Compute Overall Accuracy, Expected Accuracy, Figure of Merit,
Specificity, Sensitivity, True Skill Statistics and
Cohen’s Kappa from a confusion matrix.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>mat</strong> – Confusion matrix. Format: [[n00, n01], [n10, n11]]
with pred on lines and obs on columns.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A dictionnary of accuracy indices.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="forestatrisk.r_diffproj">
<span class="sig-prename descclassname"><span class="pre">forestatrisk.</span></span><span class="sig-name descname"><span class="pre">r_diffproj</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inputA</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inputB</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'diffproj.tif'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blk_rows</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">128</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/forestatrisk/validate/diffproj.html#r_diffproj"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#forestatrisk.r_diffproj" title="Link to this definition">¶</a></dt>
<dd><p>Compute a raster of differences for comparison.</p>
<p>This function compute a raster of differences between two rasters
of future forest cover. Rasters must have the same extent and resolution.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>inputA</strong> – Path to first raster (predictions).</p></li>
<li><p><strong>inputB</strong> – Path to second raster of (sd. predictions or observations).</p></li>
<li><p><strong>output_file</strong> – Name of the output raster file for differences.</p></li>
<li><p><strong>blk_rows</strong> – If &gt; 0, number of rows for computation by block.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="forestatrisk.mat_diffproj">
<span class="sig-prename descclassname"><span class="pre">forestatrisk.</span></span><span class="sig-name descname"><span class="pre">mat_diffproj</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_raster</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blk_rows</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">128</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/forestatrisk/validate/diffproj.html#mat_diffproj"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#forestatrisk.mat_diffproj" title="Link to this definition">¶</a></dt>
<dd><p>Compute a confusion matrix from a raster of differences.</p>
<p>This function computes a confusion matrix from a raster of
differences. The raster of differences can be obtained using
function <code class="docutils literal notranslate"><span class="pre">.r_diffproj()</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>input_raster</strong> – Raster of differences obtain with
forestatrisk.r_projdiff.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A confusion matrix. [[np00, np01], [np10, np11]].</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="forestatrisk.resample_sum">
<span class="sig-prename descclassname"><span class="pre">forestatrisk.</span></span><span class="sig-name descname"><span class="pre">resample_sum</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_raster</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_raster</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">val</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/forestatrisk/validate/resample_sum.html#resample_sum"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#forestatrisk.resample_sum" title="Link to this definition">¶</a></dt>
<dd><p>Resample to coarser resolution with counts.</p>
<p>This function resamples to coarser resolution counting pixel
number having a given value. Window’s size is limited to 1000
pixels.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input_raster</strong> – Path to input raster.</p></li>
<li><p><strong>val</strong> – Pixel value to consider.</p></li>
<li><p><strong>window_size</strong> – Size of the window in number of pixels.</p></li>
<li><p><strong>output_raster</strong> – Path to output raster file.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="forestatrisk.validation_npix">
<span class="sig-prename descclassname"><span class="pre">forestatrisk.</span></span><span class="sig-name descname"><span class="pre">validation_npix</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">r_pred</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">r_obs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value_f</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value_d</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">square_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">33</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'npix.txt'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/forestatrisk/validate/validation_npix.html#validation_npix"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#forestatrisk.validation_npix" title="Link to this definition">¶</a></dt>
<dd><p>Compute non-deforested and deforested pixels per
square. <strong>(deprecated)</strong></p>
<p>This function computes the number of non-deforested and deforested
pixels in squares of a given size for both a raster of predictions
and a raster of observations. Results can be used to compute
correlations.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>r_pred</strong> – Path to raster of predictions.</p></li>
<li><p><strong>r_obs</strong> – Path to raster of observations.</p></li>
<li><p><strong>value_f</strong> – Value of non-deforested pixels in rasters.</p></li>
<li><p><strong>value_d</strong> – Value of deforested pixels in rasters.</p></li>
<li><p><strong>square_size</strong> – Size of the square side in number of pixels.</p></li>
<li><p><strong>output_file</strong> – Path to result file.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A pandas DataFrame, each row being one square.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="forestatrisk.validation_udef_arp">
<span class="sig-prename descclassname"><span class="pre">forestatrisk.</span></span><span class="sig-name descname"><span class="pre">validation_udef_arp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fcc_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time_interval</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">riskmap_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tab_file_defor</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">period</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'calibration'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">csize_coarse_grid</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">300</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indices_file_pred</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'indices.csv'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tab_file_pred</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'pred_obs.csv'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fig_file_pred</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'pred_obs.png'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(6.4,</span> <span class="pre">6.4)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dpi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/forestatrisk/validate/validation_udef_arp.html#validation_udef_arp"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#forestatrisk.validation_udef_arp" title="Link to this definition">¶</a></dt>
<dd><p>Validation of the deforestation risk map.</p>
<p>This function computes the observed and predicted deforestion (in
ha) for either the calibration or validation period. Deforestation
density estimates (in ha/pixel/yr) obtained with the
<code class="docutils literal notranslate"><span class="pre">defrate_per_cat</span></code> function are used to compute the predicted
deforestation in each grid cell. The function creates both a
<code class="docutils literal notranslate"><span class="pre">.csv</span></code> file with the validation data and a plot comparing
predictions vs. observations. The function returns two indices,
the weighted Root Mean Squared Error (wRMSE, in hectares) and the
MedAE (Median Absolute Error, in hectares) associated with the
deforestation predictions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fcc_file</strong> – Input raster file of forest cover change at three
dates (123). 1: first period deforestation, 2: second period
deforestation, 3: remaining forest at the end of the second
period. No data value must be 0 (zero).</p></li>
<li><p><strong>period</strong> – Either “calibration” (from t1 to t2), “validation”
(from t2 to t3), or “historical” (from t1 to t3).</p></li>
<li><p><strong>time_interval</strong> – Duration (in years) of the period.</p></li>
<li><p><strong>riskmap_file</strong> – Input raster file with categories of
spatial deforestation risk at the beginning of the period.</p></li>
<li><p><strong>tab_file_defor</strong> – Path to the <code class="docutils literal notranslate"><span class="pre">.csv</span></code> input file with
estimates of deforestation density (in ha/pixel/yr) for each
category of deforestation risk.</p></li>
<li><p><strong>csize_coarse_grid</strong> – Spatial cell size in number of pixels. Must
correspond to a distance &lt; 10 km. Default to 300 corresponding
to 9 km for a 30 m resolution raster.</p></li>
<li><p><strong>tab_file_pred</strong> – Path to the <code class="docutils literal notranslate"><span class="pre">.csv</span></code> output file with validation
data.</p></li>
<li><p><strong>fig_file_pred</strong> – Path to the <code class="docutils literal notranslate"><span class="pre">.png</span></code> output file for the
predictions vs. observations plot.</p></li>
<li><p><strong>figsize</strong> – Figure size.</p></li>
<li><p><strong>dpi</strong> – Resolution for output image.</p></li>
<li><p><strong>verbose</strong> – Logical. Whether to print messages or not. Default
to <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A dictionary. With <code class="docutils literal notranslate"><span class="pre">wRMSE</span></code>, <code class="docutils literal notranslate"><span class="pre">MedAE</span></code>, and <code class="docutils literal notranslate"><span class="pre">R2</span></code>:
weighted root mean squared error (in ha), median absolute
error (in ha), and R-square respectively for the deforestation
predictions, <code class="docutils literal notranslate"><span class="pre">ncell</span></code>: the number of grid cells with forest
cover &gt; 0 at the beginning of the validation period,
<code class="docutils literal notranslate"><span class="pre">csize_coarse_grid</span></code>: the coarse grid cell size in number of
pixels, <code class="docutils literal notranslate"><span class="pre">csize_coarse_grid_ha</span></code>: the coarse grid cell size in ha.</p>
</dd>
</dl>
</dd></dl>



          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &#169;2024, Cirad.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 7.3.7</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 0.7.16</a>
      
      |
      <a href="../_sources/python_api/forestatrisk.validate.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>